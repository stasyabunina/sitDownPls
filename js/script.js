(()=>{"use strict";class e{constructor(e,i){this.element=e,this.menu=i,this.init()}bindToDOM(){this.burgerClose=this.menu.querySelector(".header-middle__close"),this.menuLinks=this.menu.querySelectorAll(".header-middle__item"),this.menuLinksTwo=this.menu.querySelectorAll(".header-middle__item-two")}init(){this.bindToDOM(),this.addEventListeners()}addEventListeners(){this.element.addEventListener("click",(()=>{this.menu.classList.toggle("header-middle__nav-wrapper--active"),document.body.classList.toggle("stop-scroll")})),this.burgerClose.addEventListener("click",(()=>{this.menu.classList.toggle("header-middle__nav-wrapper--active"),document.body.classList.toggle("stop-scroll")})),this.menuLinks.forEach((e=>{e.addEventListener("click",(()=>{this.menu.classList.remove("header-middle__nav-wrapper--active"),document.body.classList.remove("stop-scroll")}))})),this.menuLinksTwo.forEach((e=>{e.addEventListener("click",(()=>{this.menu.classList.remove("header-middle__nav-wrapper--active"),document.body.classList.remove("stop-scroll")}))}))}}class i{constructor(e){this.element=e,this.init()}bindToDOM(){this.svgs=this.element.querySelectorAll(".filter__btn-svg"),this.btns=this.element.querySelectorAll(".filter__btn"),this.sublist=this.element.querySelectorAll(".filter__sublist")}init(){this.bindToDOM(),this.addEventListeners()}addEventListeners(){this.btns.forEach((e=>{e.addEventListener("click",(()=>{let i=e.parentElement.querySelector(".filter__sublist");this.sublist.forEach((e=>{e!==i&&e.classList.remove("filter__sublist--active")})),i.classList.toggle("filter__sublist--active"),this.svgs.forEach((i=>{i.classList.toggle("filter__btn-svg--reversed"),i!==e.querySelector(".filter__btn-svg")&&i.classList.remove("filter__btn-svg--reversed")}))}))})),document.addEventListener("click",(e=>{e.target.closest(".filter__list")||(this.sublist.forEach((e=>{e.classList.remove("filter__sublist--active")})),this.svgs.forEach((e=>{e.classList.remove("filter__btn-svg--reversed")})))}))}}class t{constructor(e,i,t){this.element=e,this.inputLower=i,this.inputHigher=t,this.inputs=[this.inputLower,this.inputHigher],this.init(this.element,this.inputs)}init(e,i){noUiSlider.create(e,{start:[2e3,15e4],connect:!0,step:1e3,range:{min:0,max:2e5},format:{to:e=>parseFloat(e).toFixed(0),from:e=>parseFloat(e).toFixed(0)}}),e.noUiSlider.on("update",(function(e,t){i[t].value=e[t]})),i.forEach(((i,t)=>{i.addEventListener("change",(()=>{e.noUiSlider.setHandle(t,Math.round(this.value))})),i.addEventListener("keydown",(i=>{let s,r=e.noUiSlider.get(),l=Number(r[t]),n=e.noUiSlider.steps()[t];switch(i.which){case 13:e.noUiSlider.setHandle(t,this.value);break;case 38:s=n[1],!1===s&&(s=1),null!==s&&e.noUiSlider.setHandle(t,l+s);break;case 40:s=n[0],!1===s&&(s=1),null!==s&&e.noUiSlider.setHandle(t,l-s)}}))}))}}class s{constructor(e){this.element=e}bindToDOM(){this.filterSection=this.element.querySelector(".filter"),this.priceSliderEl=this.element.querySelector(".filter__price-slider"),this.inputHigher=this.element.querySelector(".filter__price-input_higher"),this.inputLower=this.element.querySelector(".filter__price-input_lower")}init(){this.bindToDOM(),this.swiperInit(),this.priceSlider=new t(this.priceSliderEl,this.inputLower,this.inputHigher),this.filter=new i(this.filterSection),this.timeline()}timeline(){gsap.registerPlugin(ScrollTrigger),gsap.fromTo(".catalog__swiper-container",{opacity:0,y:100},{duration:.7,opacity:1,y:0})}swiperInit(){this.catalogSwiperInit()}catalogSwiperInit(){this.catalogSwiper=new Swiper(".catalog__swiper-container",{watchSlidesProgress:!0,slidesPerView:3,slidesPerGroup:3,grid:{fill:"rows",rows:3},spaceBetween:32,breakpoints:{963:{slidesPerView:3,slidesPerGroup:3},751:{slidesPerView:2,slidesPerGroup:2,spaceBetween:32},577:{slidesPerView:2,slidesPerGroup:2},320:{slidesPerView:2,slidesPerGroup:2,spaceBetween:16}},pagination:{el:".catalog__pagination",clickable:!0,renderBullet:(e,i)=>'<span class="'+i+'">'+(e+1)+"</span>"},a11y:{paginationBulletMessage:"Перейти к следующей странице"}})}}const r="/catalog.html",l="/product.html";class n{constructor(e,i,t,s,r){this.form=e,this.phone=i,this.options=t,this.fields=s,this.onSuccess=r,this.init()}init(){this.inputMask(),this.validate(),this.addFields(),this.onSuccessHandler()}inputMask(){new Inputmask("+7(999) 999 99 99").mask(this.phone)}validate(){this.validation=new JustValidate(this.form,this.options)}addFields(){for(const e of this.fields)this.validation.addField(e.id,e.rules)}onSuccessHandler(){void 0!==this.onSuccess&&this.validation.onSuccess((()=>this.onSuccess()))}}class o{constructor(e,i){this.btn=e,this.itemsLength=i.length,this.items=i,this.init()}init(){if(window.matchMedia("(max-width: 1200px) and (min-width: 963px)").matches){let e=6;this.btn.addEventListener("click",(()=>{e+=3;const i=Array.from(this.items).slice(0,e);i.forEach((function(e){e.classList.add("rating__item--visible")})),i.length===this.itemsLength&&this.btn.classList.add("rating__btn--hidden")}))}else if(window.matchMedia("(max-width: 962px) and (min-width: 320px)").matches){let e=6;this.btn.addEventListener("click",(()=>{e+=2;const i=Array.from(this.items).slice(0,e);i.forEach((function(e){e.classList.add("rating__item--visible")})),i.length===this.itemsLength&&this.btn.classList.add("rating__btn--hidden")}))}else{let e=8;this.btn.addEventListener("click",(()=>{e+=4;const i=Array.from(this.items).slice(0,e);i.forEach((function(e){e.classList.add("rating__item--visible")})),i.length===this.itemsLength&&this.btn.classList.add("rating__btn--hidden")}))}}}class a{constructor(e){this.element=e}bindToDOM(){this.btnMore=this.element.querySelector(".rating__btn"),this.ratingItems=this.element.querySelectorAll(".rating__item"),this.phoneInput=this.element.querySelector(".feedback__tel-input"),this.form=this.element.querySelector(".feedback__form")}init(){this.bindToDOM(),this.tooltipHandler(),this.swiperInit(),this.feedbackFormValidator(),this.timeline(),this.loader=new o(this.btnMore,this.ratingItems)}timeline(){gsap.registerPlugin(ScrollTrigger),gsap.fromTo(".offers__swiper-container",{opacity:0,y:100},{scrollTrigger:{trigger:".offers__swiper-container",start:"top 90%"},duration:.7,opacity:1,y:0}),gsap.fromTo(".rating__item",{opacity:0,y:100},{scrollTrigger:{trigger:".rating__item",start:"top 90%"},duration:.7,opacity:1,y:0}),gsap.fromTo(".top-category__item",{opacity:0,y:100},{scrollTrigger:{trigger:".top-category__item",start:"top 90%"},duration:.7,opacity:1,y:0}),gsap.fromTo(".useful__swiper-container",{opacity:0,y:100},{scrollTrigger:{trigger:".useful__swiper-container",start:"top 90%"},duration:.7,opacity:1,y:0})}tooltipHandler(){tippy(".feedback__tooltip",{content:"Реплицированные с зарубежных источников, исследования формируют глобальную сеть.",theme:"gray",maxWidth:190})}swiperInit(){this.heroSwiperInit(),this.offersSwiperInit(),this.usefulSwiperInit()}heroSwiperInit(){this.heroSwiper=new Swiper(".hero__swiper-container",{slidesPerView:1,loop:!0,pagination:{el:".hero__pagination",clickable:!0},autoplay:{delay:5e3},a11y:{paginationBulletMessage:"Перейти к другому слайду"},keyboard:!0})}offersSwiperInit(){this.offersSwiper=new Swiper(".offers__swiper-container",{slidesPerView:"auto",slidesPerGroup:1,spaceBetween:32,autoplay:!1,a11y:{prevSlideMessage:"К предыдущему слайду",nextSlideMessage:"К следующему слайду"},navigation:{nextEl:".offers__button-next",prevEl:".offers__button-prev"},breakpoints:{1201:{slidesPerView:"auto"},963:{slidesPerView:3},751:{slidesPerView:2},320:{slidesPerView:1}}})}usefulSwiperInit(){this.usefulSwiper=new Swiper(".useful__swiper-container",{slidesPerGroup:1,spaceBetween:32,autoplay:!1,a11y:{prevSlideMessage:"К предыдущему слайду",nextSlideMessage:"К следующему слайду"},navigation:{nextEl:".useful__button-next",prevEl:".useful__button-prev"},breakpoints:{1201:{slidesPerView:2},963:{slidesPerView:3},751:{slidesPerView:2},320:{slidesPerView:1}}})}feedbackFormValidator(){const e=[{id:"#name",rules:[{rule:"required",errorMessage:"Вы не ввели имя"},{rule:"minLength",value:2,errorMessage:"Поле должно содержать минимум :value символов"},{rule:"maxLength",value:30,errorMessage:"Поле должно содержать максимум :value символов"},{rule:"customRegexp",value:"^[a-zA-Zа-яА-Я -]+$",errorMessage:"Недопустимый формат"}]},{id:"#email",rules:[{rule:"required",errorMessage:"Вы не ввели e-mail"},{rule:"email",errorMessage:"Недопустимый формат"}]},{id:"#tel",rules:[{rule:"required",errorMessage:"Вы не ввели телефон"},{validator:()=>Number(this.phoneInput.inputmask.unmaskedvalue())&&10===this.phoneInput.inputmask.unmaskedvalue().length,errorMessage:"Пожалуйста, введите действительный номер телефона"}]},{id:"#agree",rules:[{rule:"required",errorMessage:"Обязательное согласие"}]}];this.validator=new n(this.form,this.phoneInput,{successFieldCssClass:"is-valid",errorFieldCssClass:"is-invalid",errorLabelCssClass:"is-label-invalid",errorLabelStyle:{color:"#FF6972"}},e,(()=>{this.form.reset()}))}}class c{constructor(e,i){this.productSection=e,this.element=i,this.init()}bindToDOM(){this.openModal=this.productSection.querySelector(".product__buy-btn"),this.closeModal=this.element.querySelector(".buy__close-btn"),this.wrapper=this.element.querySelector(".buy__wrapper"),this.phoneInput=this.element.querySelector(".buy__tel-input"),this.form=this.element.querySelector(".buy__form"),this.success=this.element.querySelector(".buy__success"),this.formWrapper=this.element.querySelector(".buy__form-wrapper")}init(){this.bindToDOM(),this.addEventListeners(),this.formValidator()}addEventListeners(){this.openModal.addEventListener("click",(()=>{this.element.classList.toggle("buy--visible"),this.wrapper.classList.toggle("buy__wrapper--visible"),document.body.classList.toggle("stop-scroll")})),this.closeModal.addEventListener("click",(()=>{this.element.classList.remove("buy--visible"),this.wrapper.classList.remove("buy__wrapper--visible"),document.body.classList.remove("stop-scroll")}))}formValidator(){const e=[{id:"#name",rules:[{rule:"required",errorMessage:"Вы не ввели имя"},{rule:"minLength",value:2,errorMessage:"Поле должно содержать минимум :value символов"},{rule:"maxLength",value:30,errorMessage:"Поле должно содержать максимум :value символов"},{rule:"customRegexp",value:"^[a-zA-Zа-яА-Я -]+$",errorMessage:"Недопустимый формат"}]},{id:"#tel",rules:[{rule:"required",errorMessage:"Вы не ввели телефон"},{validator:()=>Number(this.phoneInput.inputmask.unmaskedvalue())&&10===this.phoneInput.inputmask.unmaskedvalue().length,errorMessage:"Пожалуйста, введите действительный номер телефона"}]},{id:"#agree",rules:[{rule:"required",errorMessage:"Обязательное согласие"}]}];this.validator=new n(this.form,this.phoneInput,{successFieldCssClass:"is-valid",errorFieldCssClass:"is-invalid",errorLabelCssClass:"is-label-invalid",errorLabelStyle:{color:"#FF6972"}},e,(()=>{this.formWrapper.classList.add("buy__form-wrapper--hidden"),this.success.classList.add("buy__success--visible")}))}}class d{constructor(e,i){this.productSection=e,this.element=i,this.init()}bindToDOM(){this.closeModal=this.element.querySelector(".preview__close-btn"),this.wrapper=this.element.querySelector(".preview__wrapper"),this.sliders=this.productSection.querySelectorAll(".primary-slider__slide")}init(){this.bindToDOM(),this.addEventListeners()}addEventListeners(){this.sliders.forEach((e=>{e.addEventListener("click",(()=>{this.element.classList.toggle("preview--visible"),this.wrapper.classList.toggle("preview__wrapper--visible"),document.body.classList.toggle("stop-scroll")}))})),this.closeModal.addEventListener("click",(()=>{this.element.classList.remove("preview--visible"),this.wrapper.classList.remove("preview__wrapper--visible"),document.body.classList.remove("stop-scroll")})),this.sliders.forEach((e=>{e.addEventListener("click",(()=>{this.element.focus()}))}))}}class h{constructor(e){this.element=e}bindToDOM(){this.productSection=this.element.querySelector(".product"),this.buyModalEl=this.element.querySelector(".buy"),this.previewModalEl=this.element.querySelector(".preview")}init(){this.bindToDOM(),this.swiperInit(),this.previewModal=new d(this.productSection,this.previewModalEl),this.buyModal=new c(this.productSection,this.buyModalEl),this.timeline()}timeline(){gsap.registerPlugin(ScrollTrigger),gsap.fromTo(".product__desc",{opacity:0,y:100},{duration:.7,opacity:1,y:0}),gsap.fromTo(".product__details",{opacity:0,y:100},{duration:.7,opacity:1,y:0}),gsap.fromTo(".similar__swiper-container",{opacity:0,y:100},{scrollTrigger:{trigger:".similar__swiper-container",start:"top 90%"},duration:.7,opacity:1,y:0})}swiperInit(){this.previewSwiperInit(),this.productSwiperInit(),this.similarSwiperInit()}similarSwiperInit(){this.similarSwiper=new Swiper(".similar__swiper-container",{slidesPerView:4,slidesPerGroup:1,spaceBetween:32,autoplay:!1,a11y:{prevSlideMessage:"К предыдущему слайду",nextSlideMessage:"К следующему слайду"},navigation:{nextEl:".similar__button-next",prevEl:".similar__button-prev"},breakpoints:{1201:{slidesPerView:4},963:{slidesPerView:3},751:{slidesPerView:2,spaceBetween:32},320:{slidesPerView:2,spaceBetween:16}}})}previewSwiperInit(){this.previewSecondarySwiper=new Swiper(".preview-secondary-slider",{spaceBetween:78,slidesPerView:"auto",freeMode:!0,watchSlidesProgress:!0,centeredSlides:!1,navigation:{nextEl:".preview__button-next",prevEl:".preview__button-prev"},a11y:{prevSlideMessage:"К предыдущему слайду",nextSlideMessage:"К следующему слайду"},breakpoints:{751:{slidesPerView:"auto",centeredSlides:!1},320:{slidesPerView:1,centeredSlides:!0}}});const e={spaceBetween:78,thumbs:{swiper:this.previewSecondarySwiper}};this.previewPrimarySwiper=new Swiper(".preview-primary-slider",e)}productSwiperInit(){this.secondarySwiper=new Swiper(".secondary-slider",{spaceBetween:38,slidesPerView:4,freeMode:!0,watchSlidesProgress:!0,breakpoints:{1201:{slidesPerView:4,direction:"horizontal",spaceBetween:38},963:{slidesPerView:"auto",direction:"horizontal",spaceBetween:38},751:{slidesPerView:4,direction:"vertical",spaceBetween:18},577:{slidesPerView:"auto",direction:"horizontal",spaceBetween:38},320:{slidesPerView:"auto",direction:"horizontal",spaceBetween:38}}});const e={spaceBetween:38,thumbs:{swiper:this.secondarySwiper},breakpoints:{963:{spaceBetween:38},751:{spaceBetween:18},320:{spaceBetween:38}}};this.primarySwiper=new Swiper(".primary-slider",e)}}const p=document.querySelector("#root");new class{constructor(e){this.element=e}bindToDOM(){this.cityDropdown=this.element.querySelector(".header-top__select"),this.categoryDropdown=this.element.querySelector(".header-bottom__select"),this.burgerEl=this.element.querySelector(".burger"),this.burgerMenu=this.element.querySelector(".header-middle__nav-wrapper")}init(){let i;this.bindToDOM(),this.lazyload(),this.choicesInit(),this.burger=new e(this.burgerEl,this.burgerMenu),this.pathname=window.location.pathname,i=this.pathname.endsWith(r)?new s(this.element):this.pathname.endsWith(l)?new h(this.element):new a(this.element),i.init()}lazyload(){window.onload=function(){lazyload()}}choicesInit(){this.cityDropdownChoices=new Choices(this.cityDropdown,{searchEnabled:!1,itemSelectText:"",allowHTML:!0}),this.categoryDropdownChoices=new Choices(this.categoryDropdown,{searchEnabled:!1,itemSelectText:"",placeholder:!0,allowHTML:!0})}}(p).init()})();